# Nucmorph-Colorizer ðŸ”¬ðŸŽ¨

#### A web-based, time-series visualizer for tracked segmented data.

## Description

**Nucmorph-Colorizer is a web tool for interacting with and visualizing features in time-series segmented data**. You can apply color maps and ranges,
switch between features in your dataset, play through your data to observe motion, and view plots showing how feature data change over time!

This project originated from the [Allen Institute for Cell Science (AICS)](https://alleninstitute.org/division/cell-science/) Nuclear Morphogenesis
project and is being updated to support broader use cases. View our [Issues page](https://github.com/allen-cell-animated/nucmorph-colorizer/issues)
for more details about potential future features!

**[A hosted version of the app can be accessed here!](http://dev-aics-dtp-001.corp.alleninstitute.org/nucmorph-colorizer/dist/index.html)**

![image](https://github.com/allen-cell-animated/nucmorph-colorizer/assets/30200665/d9d22cba-faa0-4366-a647-973bc2fce360)

### Opening New Datasets

To add new datasets to the web client, you'll need to format it for compatibility with Nucmorph-Colorizer and store it in a HTTP-accessible location. More details can be found in the [data format specification](./documentation/DATA_FORMAT.md).

Modify one of the following links to open your dataset from the browser:

```
http://dev-aics-dtp-001.corp.alleninstitute.org/nucmorph-colorizer/dist/index.html?collection={collection URL}
http://dev-aics-dtp-001.corp.alleninstitute.org/nucmorph-colorizer/dist/index.html?dataset={dataset URL}
```

Support for opening datasets via the UI is coming soon!

## Installation

Installing is optional! You can use the [hosted version of Nucmorph Colorizer](http://dev-aics-dtp-001.corp.alleninstitute.org/nucmorph-colorizer/dist/index.html)
to access our existing datasets without installing the project.

**Prerequisites:**

- Node 18 or higher
- Python 3.8 or higher (and optionally, a virtual Python environment)
- This repository, cloned with `git clone`

### Web tool

Navigate to the project's root directory in a terminal window. Then run:

```
npm install
npm run dev
```

This will start a development server you can access from your browser. By default, the server will be hosted at `http://localhost:5173/`.

### Data preprocessing

Data must be preprocessed to work with Nucmorph-Colorizer. [You can read more about the data format specification here.](./documentation/DATA_FORMAT.md)
Utilities are included in this repository to convert time-series data generated by the AICS nuclear morphogenesis project's analysis pipeline.

For loading of datasets to work correctly, you'll need to run these commands from a device that has access to Allen Institute's on-premises data storage. If running off of shared resources, remember to initialize your virtual environment first! This may look like `conda activate {my_env}`.

NOTE: You may also need to run Python version 3.8, due to dependencies in the [Nucmorph Analysis package](https://github.com/aics-int/nuc-morph-analysis/blob/main/docs/INSTALL.md#basic-installation-instructions-with-conda-and-pip) this project was originally built for. For conda, you can create an environment with `conda create --name {my_env} python=3.8`.

Navigate to the project's `scripts` directory and install the Python dependencies:

```
cd scripts/
pip install .
```

The `convert_nucmorph_data.py` script can take in a named Nuclear Morphogenesis dataset (like `baby_bear`, `mama_bear`, or `goldilocks`) and convert it to a format readable
by the web client.

```
python timelapse-colorizer-data/convert_nucmorph_data.py --output_dir {output_dir} --dataset {dataset_name} --scale 0.25
```

## Development

See [CONTRIBUTING.md](CONTRIBUTING.md) for information related to developing the code.
